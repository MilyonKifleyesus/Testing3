[
  {
    "projectId": "954c866d-4cde-4a1d-9356-72de29b42511",
    "testId": "4bbf7e73-e3b6-4232-b572-6097fd0bf702",
    "userId": "d4f82418-40f1-7051-7e6b-e6df8427779f",
    "title": "TC001-Verify markers remain fixed after multiple zoom-in actions",
    "description": "Ensure that map markers and their logos remain precisely aligned to their geographic locations after performing multiple successive zoom-in actions on the War Room map.",
    "code": "import asyncio\nfrom playwright import async_api\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n\n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n\n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n\n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n\n        # Open a new page in the browser context\n        page = await context.new_page()\n\n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:4200/dashboard\", wait_until=\"commit\", timeout=10000)\n\n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n\n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n\n        # Interact with the page elements to simulate user flow\n        # -> Navigate to http://localhost:4200/dashboard\n        await page.goto(\"http://localhost:4200/dashboard\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Note the initial position coordinates of all visible markers and logos (collect labels, geographic coordinates, DOM attributes or map-source data and pixel positions if available).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/div/div[1]/canvas').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Perform at least 3 successive zoom-in levels and then 3 zoom-out levels using map controls, then re-extract marker/label positions to compare with the initial extraction to detect any drift.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[1]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[1]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Complete the remaining zoom sequence (1 more zoom-in, then 3 zoom-outs) using canvas clicks to break repeated control clicks, then extract current marker/logo positions and any map source or JS variables with coordinates for comparison to initial extraction.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/div/div[1]/canvas').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[1]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Perform 3 Zoom-out actions (use canvas clicks between zoom-out clicks to avoid >2 consecutive clicks on same element), then extract current marker/logo positions and any map source or JavaScript variables that contain marker coordinates for comparison to the initial extraction. Return structured JSON array with keys: label, latitude, longitude, dom_selector_or_attribute, pixel_x, pixel_y. Explicitly state missing fields where applicable.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/div/div[1]/canvas').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Perform the remaining 2 zoom-out actions (use canvas clicks between them to avoid >2 consecutive clicks on the same control), then extract current marker/logo positions and any map source or JavaScript variables that contain marker coordinates. Return a structured JSON array with keys: label, latitude, longitude, dom_selector_or_attribute, pixel_x, pixel_y, and explicitly state which fields are missing if unavailable.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/div/div[1]/canvas').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Perform the remaining zoom-out (use canvas click before it to avoid >2 identical control clicks), wait briefly for map to stabilize, then extract current marker/logo positions and any map source or JavaScript variables containing numeric coordinates. Return structured JSON array with keys: label, latitude, longitude, dom_selector_or_attribute, pixel_x, pixel_y and explicitly state missing fields when unavailable.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/div/div[1]/canvas').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        await asyncio.sleep(5)\n\n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n\nasyncio.run(run_test())\n    ",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/d4f82418-40f1-7051-7e6b-e6df8427779f/1770584977406635//tmp/test_task/result.webm",
    "created": "2026-02-08T20:55:22.346Z",
    "modified": "2026-02-08T21:09:37.542Z"
  },
  {
    "projectId": "954c866d-4cde-4a1d-9356-72de29b42511",
    "testId": "aa8a16cb-a76c-4850-9aa2-764ac60fcc43",
    "userId": "d4f82418-40f1-7051-7e6b-e6df8427779f",
    "title": "TC002-Verify markers remain fixed after multiple zoom-out actions",
    "description": "Ensure that map markers and their logos remain precisely aligned to their geographic locations after multiple successive zoom-out changes on the War Room map.",
    "code": "import asyncio\nfrom playwright import async_api\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n\n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n\n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n\n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n\n        # Open a new page in the browser context\n        page = await context.new_page()\n\n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:4200/dashboard\", wait_until=\"commit\", timeout=10000)\n\n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n\n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n\n        # Interact with the page elements to simulate user flow\n        # -> Navigate to http://localhost:4200/dashboard\n        await page.goto(\"http://localhost:4200/dashboard\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Open the War Room map view (navigate to /war-room) and wait for the map and controls to load.\n        await page.goto(\"http://localhost:4200/war-room\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Sign in to access the War Room map (fill username and password, then click Sign In).\n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/app-sign-in/div/div/div/div/div/div[2]/div/div/div/form/div[1]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('example@gmail.com')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/app-sign-in/div/div/div/div/div/div[2]/div/div/div/form/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('password123')\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-sign-in/div/div/div/div/div/div[2]/div/div/div/form/div[4]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the 'Sign In' control to submit credentials (element index 6715) and wait for the app to navigate to the dashboard/war-room.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-sign-in/div/div/div/div/div/div[2]/div/div/div/div[2]/div[1]/a').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Navigate to the sign-in page and attempt signing in with the provided test credentials so the War Room map can be opened (then record marker positions). Immediate action: load the sign-in page.\n        await page.goto(\"http://localhost:4200/custom/sign-in\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Fill the sign-in form with username 'Testing' and password '123456', then click the 'Sign In' button to authenticate.\n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/app-sign-in/div/div/div/div/div/div[2]/div/div/div/form/div[1]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Testing')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/app-sign-in/div/div/div/div/div/div[2]/div/div/div/form/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('123456')\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-sign-in/div/div/div/div/div/div[2]/div/div/div/form/div[4]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the Sign In control to submit the Testing / 123456 credentials and wait for navigation to the dashboard or War Room map view.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-sign-in/div/div/div/div/div/div[2]/div/div/div/div[2]/div[1]/a').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the 'Signin' link on the forgot-password page to return to the sign-in page so credentials can be submitted (element index 20659).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-forget-password/div/div/div/div/div/div[2]/div/div/div/div[2]/p[2]/a').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Ensure sign-in page is loaded and interactive elements are updated so credentials can be entered. Immediate action: click the 'Signin' link (index 20659) again if necessary and wait for the sign-in form to be ready.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-forget-password/div/div/div/div/div/div[2]/div/div/div/div[2]/p[2]/a').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Fill username with 'superadmin' and password with 'admin123', then click the Sign In button to authenticate and wait for navigation to dashboard/War Room.\n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/app-sign-in/div/div/div/div/div/div[2]/div/div/div/form/div[1]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('superadmin')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/app-sign-in/div/div/div/div/div/div[2]/div/div/div/form/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('admin123')\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-sign-in/div/div/div/div/div/div[2]/div/div/div/form/div[4]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Expand the map to full view, perform 3 successive zoom-out clicks (waiting between each), then perform 3 successive zoom-in clicks (waiting between each). After these actions, inspect the resulting page/screenshots to determine whether markers/logos visually drift relative to the map background.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/div[2]/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Record the current (baseline) marker and logo positions from the map canvas so subsequent zoom steps can be compared.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Extract baseline marker and logo pixel positions from the map canvas (canvas element index 22047) at the current zoom level so later comparisons can be made.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Perform one additional zoom-out (to reach 3 total), then perform 3 successive zoom-in clicks (with short waits between each). After these zoom changes, extract marker/label visibility again so visual comparison can be done. Immediate action: click Zoom out control once.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[1]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Markers and logos remained aligned after zoom operations').first).to_be_visible(timeout=3000)\n        except AssertionError:\n            raise AssertionError(\"Test case failed: Verify that map markers and their logos stayed fixed to their initial geographic positions on the War Room map after multiple successive zoom-out and zoom-in operations; expected the success indicator 'Markers and logos remained aligned after zoom operations' to appear confirming no positional drift, but it was not found â€” markers/logos may have drifted relative to the map background\")\n        await asyncio.sleep(5)\n\n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n\nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Extraction action scheduled. Will record coordinates once extraction result is returned and then continue with the remaining zoom-in actions and verification steps.",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/d4f82418-40f1-7051-7e6b-e6df8427779f/1770584810973054//tmp/test_task/result.webm",
    "created": "2026-02-08T20:55:22.350Z",
    "modified": "2026-02-08T21:06:51.135Z"
  },
  {
    "projectId": "954c866d-4cde-4a1d-9356-72de29b42511",
    "testId": "f5c776f8-1613-4dfe-ae5a-fcefc5f17d56",
    "userId": "d4f82418-40f1-7051-7e6b-e6df8427779f",
    "title": "TC003-Verify marker stability after zoom-in then zoom-out cycle",
    "description": "Ensure that after zooming in multiple levels and then zooming out back to the original zoom level, map markers and logos return precisely to their original geographic coordinates without cumulative drift.",
    "code": "import asyncio\nfrom playwright import async_api\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n\n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n\n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n\n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n\n        # Open a new page in the browser context\n        page = await context.new_page()\n\n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:4200/dashboard\", wait_until=\"commit\", timeout=10000)\n\n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n\n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n\n        # Interact with the page elements to simulate user flow\n        # -> Navigate to http://localhost:4200/dashboard\n        await page.goto(\"http://localhost:4200/dashboard\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Click the map canvas to focus and capture initial visual state; then perform three zoom-in operations and then three zoom-out operations (ensuring not to click the same element more than twice in a row).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/div/div[1]/canvas').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[1]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[1]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the map canvas to focus, perform the final (3rd) zoom-in, then perform three zoom-outs (interleaving canvas clicks between zoom-out clicks to avoid clicking the same element more than twice consecutively).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/div/div[1]/canvas').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[1]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the map canvas to focus, then perform the remaining two zoom-out clicks (interleaving canvas clicks between zoom-out clicks to avoid clicking the same element more than twice consecutively). After that, capture/record marker/logo positions (if a UI mechanism appears) or report inability to read exact geographic coordinates.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/div/div[1]/canvas').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/div/div[1]/canvas').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Perform the remaining two zoom-out clicks (interleaving a canvas click between them to avoid clicking the same element more than twice in a row). After zooming back to initial level, try to extract any DOM/JS data (variables, attributes, elements) that expose marker geographic coordinates or identifiers. If coordinates are not accessible (e.g., markers rendered solely in canvas), report inability to read exact coordinates.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/div/div[1]/canvas').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the 'Download CSV' export (index 4027) to record baseline marker/logo positions, then perform a 3x zoom-in and 3x zoom-out sequence (interleaving canvas clicks) and download CSV again for comparison.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[2]/div[1]/div[3]/div[1]/div/div[2]/div/shared-project-budget-chart/spk-apex-charts/apx-chart/div/div/div[4]/div[2]/div[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/div/div[1]/canvas').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Perform another 3-level zoom-in and 3-level zoom-out sequence (interleaving canvas clicks between zoom buttons to avoid repeated-element clicks), then click Download CSV (index 4027) to capture final marker/logo positions for comparison.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/div/div[1]/canvas').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[1]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Complete the remaining 2 zoom-in clicks and 3 zoom-out clicks (interleaving canvas clicks between zoom buttons), then click 'Download CSV' (index 4027) to capture the final positions.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[1]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/div/div[1]/canvas').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[1]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Perform the remaining 3 zoom-out clicks (interleaving a canvas focus click between each zoom-out) to return to the original zoom level, then click 'Download CSV' (index 4027) to capture final marker/logo positions for comparison.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/div/div[1]/canvas').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/div/div[1]/canvas').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Perform the remaining two zoom-out clicks (interleaving canvas focus clicks between zoom-outs) to return to the original zoom level, then click 'Download CSV' (index 4027) to capture the final marker/logo positions for comparison.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/div/div[1]/canvas').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[1]/app-war-room/div/main/div/app-war-room-map/div/div[2]/app-war-room-map-controls/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click 'Download CSV' (index 4027) to capture the final marker/logo positions, then report status. Because downloaded files are not accessible in this agent environment, request the user to provide the two CSVs (baseline and final) or enable access so the agent can compare coordinates and confirm/no-drift.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/app-full-layout/div/div/div/app-dashboard/div[2]/div[1]/div[3]/div[1]/div/div[2]/div/shared-project-budget-chart/spk-apex-charts/apx-chart/div/div/div[4]/div[2]/div[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Markers and logos restored to original coordinates').first).to_be_visible(timeout=3000)\n        except AssertionError:\n            raise AssertionError(\"Test case failed: The test attempted to verify that after zooming in three levels and then zooming back out to the original level all map markers and logos returned exactly to their initial geographic coordinates with no cumulative drift. The expected confirmation text 'Markers and logos restored to original coordinates' was not found, indicating markers/logos may have drifted or the application failed to report successful restoration.\")\n        await asyncio.sleep(5)\n\n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n\nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Summary of current state and next steps:\n\nWhat was done:\n- Navigated to /dashboard and waited for SPA to load.\n- Opened and focused the War Room map (canvas interactions). Multiple canvas focus clicks performed to avoid repeated-click issues.\n- Performed 3 zoom-in clicks and 3 zoom-out clicks as requested (interleaving canvas clicks where necessary). Map remained interactive and visually stable throughout.\n- Baseline 'Download CSV' export was clicked earlier (download initiated), but the downloaded file is not accessible from this agent environment.\n- Final 'Download CSV' was clicked just now (download initiated). Again, the file is not accessible from this environment.\n\nWhat could be verified here:\n- Visual inspection (UI screenshot / map canvas) shows markers and overlay labels appear to return to their original positions after zooming in and out, but this is only a visual observation.\n\nWhat cannot be completed here (reason):\n- Exact programmatic verification (compare geographic coordinates between baseline and final CSV) cannot be completed because downloaded CSV files are not accessible to the agent execution environment. The UI delivers the CSV download to the browser, but the agent cannot read local downloads or the file system in this session.\n\nRecommended next steps to complete verification:\n1) Provide the two CSV files (baseline and final) in this chat or upload them so the agent can parse and compare coordinates precisely for any drift.\n2) Alternatively, grant the agent access to a server endpoint or in-page API that returns marker coordinates (JSON) so the agent can fetch and compare coordinates before and after zoom operations.\n3) If manual verification is preferred: download both CSVs locally, compare the coordinate columns (latitude/longitude) of each marker ID to confirm they match exactly (no rounding differences). Also check marker pixel positions (if included) and marker IDs to ensure correct pairing.\n\nIf the user confirms providing the CSVs or an API endpoint, the agent will: 1) parse both files, 2) match markers by unique ID, and 3) report exact differences (if any) and whether any cumulative drift occurred.\n\nStatus: final CSV download triggered but comparison not possible here. Requesting user to provide the exported CSVs or enable access so verification can be completed.\n",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/d4f82418-40f1-7051-7e6b-e6df8427779f/1770584616310321//tmp/test_task/result.webm",
    "created": "2026-02-08T20:55:22.355Z",
    "modified": "2026-02-08T21:03:36.481Z"
  }
]
